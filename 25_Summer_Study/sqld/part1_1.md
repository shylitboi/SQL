# Chapter 1 데이터 모델링의 이해

>## 1. 데이터 모델의 이해

* 모델링 : 현실세계를 단순화하여 표현하는 기법
    * 현실 세계 반영, 단순화하여 표현, 관리하고자 하는 데이터를 모델로 설계

* 모델링의 특징 
    1) 추상화 : 아이디어나 개념을 간략하게 표현
    2) 단순화 
    3) 명확화
* 모델링의 세가지 관점
    1) 데이터 관점(what, data) : 어떤 데이터, 데이터간 어떤 관계가 있는지
    2) 프로세스 관점(how, process) : 업무가 실제로 처리하고 있는 일은 무엇인지
    3) 데이터와 프로세스 상관 관점 : 프로세스의 흐름에 따라 데이터가 어떤 영향을 받는지

* 데이터 품질 보장하기 위해 유의해야하는 점
    1) 중복 : 같은 데이터가 여러 엔터티에 중복을 ㅗ저장되는 현상 지양
    2) 비유연성 : 데이터 모델 설계에 따라 애플리케이션의 사소한 변경에도 데이터 모델이 변경되지 않게
    3) 비일관성 : 데이터간 연관관계에 대해 명확하게 정의해야한다
* 모델링의 3단계
    1) 개념적 데이터 모델링 : 추상화 수준이 가장 높고, 전사적 데이터 모델링 수행시, 업무중심적, 포괄적
    2) 논리적 데이터 모델링 : **재사용성**이 가장 높은 모델링, 모델에 대해 key, 속성, 관계등을 모두 표현
    3) 물리적 데이터 모델링 : 실제 모델 표현

* 데이터의 독립성 : ANSI-SPARC 아키텍쳐는 스키마를 3단계 구조로 나눔
    * 이는 DB에 대한 사용자들의 관점과 DB가 실제로 표현되는 물리적 방식을 분리
    1) 외부 스키마; 사용자 관점(Multiple User's View)단계로 각 사용자가 보는 데이터베이스의 스키마 정의
    2) 개념 스키마; 통합된 관점 단계로 모든 사용자가 보는 조직 전체 관점으 통합적인 표현
    3) 내부 스키마; 물리적 관점으로 물리적 저장 구조를 나타냄

```
독립성 보장
1) 논리적 독립성 : 개념 스키마가 변경되어도 외부 스키마는 영향받지 않는다
2) 물리적 독립성 : 내부 스키마가 변경되어도 외부/개념 스키마는 영향받지 않는다
```
* ERD : 시스템에 어떤 엔터티가 존재하며 그들 간 어떤 관계가 있는지 나타낸 다이어그램
    1) 다양한 표기법이 있으며 주로 까마귀발(IE/Crow's Foot)표기법을 사용
    2) 작성 순서 :  
    엔터티 도출 -> 엔터티 배치 -> 관계 설정(식별자/비식별자 관계 등) -> 관계명 기입 -> 관계 참여도 기입 -> 관계 필수/선택 여부
---
>## 엔터티
* 엔터티란? : 식별 가능한 개체, 명확한 조건이 기준이 되어야 한다 ; ```탈퇴가 예상 되는 회원``` 같이 모호한 기준은 성립 불가

> 엔터티 : table, 인스턴트 : row, 속성 : column
* 엔터티 특징
    1) 업무에서 쓰이는 정보(당연)
    2) **식별자**가 있어야함 eg) 상품 코드
    3) 2개 이상의 인스턴스(=row)
    4) 속성이 있어야함
    5) 다른 엔터티와 1개 이상의 **관계**를 가지고 있어야함  eg) 회원엔터티 - 주문 엔터티 - 상품 엔터티
* 엔터티 분류
    1) 유형 vs 무형
        * 유형 : 실제 개념이 있는 인스턴스들로 구성됨(상품, 회원)
        * 개념 엔터티 : 물리적 형태가 없음(부서, 학과 등)
        * 사건 엔터티 : 행위를 함으로써 발생, 통계 자료로 이용(주문, 이벤트등)
    2) **발생시점**
        * 기본 엔터티 : 업무에 원래 존재, 독립적으로 생성되며 자식 엔터티를 가짐(상품, 회원, 사원, 부서 등)
        * ```중심 엔터티``` : 기본 엔터티로부터 파생되며 행위 엔터티 생성, 업무에 있어서 중심적인 역햘을 하며 데이터 양이 많이 발생(주문, 매출 계약 등)
        * 행위 엔터티 : 2개 이상의 엔터티로부터 파생, 데이터가 자주 변경, 증가(주문 내역, 이벤트 응모 이력 등) -> 상세 설계 단계에서 많이 도출됨

* 엔터티 이름 정할 때 주의점
    1) 실제 쓰이는 용어
    2) 한글은 약어, 영문은 대문자
    3) 단수명사로 표현, 띄어쓰기 x
    4) 해당 엔터티가 갖고 있는 데이터가 무엇인지 명확히 표현

>## 속성(Attribute)

* 속성이란? : 엔터티의 특징을 나타내는 **최소**의 데이터 단위, 더이상 쪼개지지 않고 업무상 필요해야함
    * 상품 엔터티 - 가격변경 이력은 적절하지 않음, 이는 속성이 아니라 별도의 엔터티가 되어야 함
* 속성값 : 각각의 속성은 속성값을 가지며 하나의 인스턴스를 구체적으로 나타낸 데이터
    * 하나의 속성은 하나의 속성값만 가짐, 여러개의 속성값의 경우 별도의 엔터티로 분리하는 것이 바람직

* 엔터티, 인스턴스, 속성, 속성값의 관계
    * 엔터티 > 인스턴스 > 속성  - 속성값
    1) 하나의 엔터티는 두개 이상의 인스턴스
    2) 하나의 인스턴스는 두개 이상의 속성값
    3) 하나의 속성은 하나의 속성값
* 분류
    1) **특성**에 따른 분류
        * 기본 속성 : 바로 정의가 가능, 가장 많음 
        * 설계 속성 : 업무에 존재하지 않지만 모델링시 필요해서 만들어짐 eg) 학번, 회원번호
        * 파생 속성 : 계산된 값이나 가공된 값, 데이터의 정합성이 고려되어야한다
    2) **구성 방식**에 따른 분류
        * ```PK(Primary Key) 속성``` : 인스턴스를 식별할 수 있는 속성, 유니크함을 부여(사번, 학번 등)
        * FK(Foreign Key) 속성 : 다른 엔터티의 속성에서 가져온 속성으로 ```다른 엔터티와 관계를 맺게``` 하는 매개체 역할
        * 일반 속성 : 나머지(기본 속성과 헷갈림 주의)
* 도메인 : 속성이 가질 수 있는 속성값의 범위
    * 용어 사전 : 속성의 정의, 용어의 혼란 엇애기 위해
    * 시스템 카탈로그 : 시스템 자체와 관련이 있는 데이터를 담고 있는 데이터베이스, 시스템 카탈로그에 저장된 데이터를 ```메타데이터```라고 한다

>## 관계

* 관계란? : 엔터티와 엔터티간 관계
    1) 존재 관계 : 존재 자체로 연관성 있음(부서 - 직원, 학생 - 학과)
    2) 행위 관계 : 행위를 함으로써 연관성 생김(회원 - 주문, 학생 - 출석)
* 관계의 표기법
    1) 관계명 : 모든 관계는 2개의 관계명을 가짐, 각 엔터티의 관점마다 하나씩(학과;포함한다 - 학생;소속된다)
    2) 차수(Cardinality) : 각 엔터티에서 관계에 참여하는 수(1:1, 1:m, m:n)

    3) 선택사양(필수/선택) 
        * 필수 예시 : 주문은 하나 이상의 주문상품이 있어야함 -> 필수
        * 선택 예시 : 학생은 출석을 안할 수도 있음 -> 선택

>## 식별자
* 식별자란? 각각의 인스턴스를 구분 가능하게 만들어주는 대표적 속성

* 주 식별자 : PK에 해당한ㄴ 속성, 하나의 속성이 주식별자가 될 수도 있고 ```여러개의 속성이 주 식별자가 될 수도 있음```
    * 유일성 : 각 인스턴스에 유니크함 부여해 식별 가능하게 함
    * 최소성 : 유일성을 보장하는 최소 개수여야 한다
    * 불변성 : 속성값이 되도록 변하지 않아야 한다
    * 존재성 : null 이면 안된다

* 분류
    1) 대표성 여부 
        * 주식별자 : 유일성/최소성/불변성/존재성을 가진 대표 식별자, 다른 엔터티와 참조 관계로 연결
        * 보조식별자 : 인스턴스를 식별할 수 있지만 대표 식별자가 아님, 다른 엔터티와 참조 관계로 연결되지 않음
    2) 스스로 생성되었는지 여부
        * 내부 식별자 : 엔터티 내부에서 스스로 생성
        * 외부 식별자 : 다른 엔터티에서 온 식별자, 연결고리 역할, FK란 표시 있음
    3) 단일 속성 여부
        * 단일식별자 : 하나의 속성으로 구성
        * 복합식별자 : 여러 속성
    4) 대체 여부
        * 본질 식별자 : 업무 프로세스에 존재하며, 가공되지 않은 원조식별자
        * 인조 식별자 : 주식별자의 속성이 두개 이상인 경우 그 속성들을 하나로 묶어서 사용하는 식별자, 대리식별자라고도 함

* 식별자 관계 vs 비식별자 관계
    1) 식별자 관계 : 부모 엔터티의 식별자가 자식 엔터티의 주식별자가 되는 관계
        * 주식별자는 존재성에 의해 null이 있으면 안돼서 부모 엔터티가 있어야 생성 가능함
        * ```1:1(부모와 자식이 각각 1개의 인스턴스만 서로 연결됨), 혹은 1:M 관계(자식의 PK = 부모 PK + 추가 식별자(Sequence, 일련번호 등)가 형성된다```
        * 실선으로 표현
    2) 비식별자 관계 : 부모 엔터티의 식별자가 자식 엔터티의 일반속성이 되는 관계
        * 일반 속성의 속성값은 null이 될 수 있으므로, 부모 엔터티가 없는 자식 엔터티 생성이 가능
        * 점선으로 표현
# 모의고사 4회

### 2번 도메인
도메인 : 각 속성이 가질 수 있는 값의 범위
* 속성에 대한 데이터 타입, 사이즈, 제약사항 등을 지정하는 것

### 6번 비식별 관계
* 부모로 부터 밭은 식별자를 자식 엔터티의 일반속성으로 이용
* 부모 없는 자식이 생성될 수 있ㅇ음
* 엔터티 별 데이터의 생명 주기를 다르게 관리하는 경우
* 여러개의 엔터티가 하나의 엔터티로 통합되어 표현되었는데 각각의 엔터티가 별도의 관계를 가지는 경우

### 25 DISTINCT

```SELECT DISTINCT COL1, COL2```라면 (COL1, COL2)가 다른경우임, 둘다 포함해야함

### 27번 
```SQL
SELECT COUNT(*)
FROM SAMPLE1 A, SAMPLE2 B
WHERE A.COL1 <> B.COL2
```
* 일단 먼저 cross join이니까 n*m 행을 만듬
* 그 이후 필터링하는게 정확함

### 28 CROSS JOIN
* 같은 테이블을 크로스 조인할 수 있음!!

### 32번 LEAD/LAG

* LEAD(칼럼, n, m) : 본인보다 n번째 아래 행의 값을 출력, 없을 경우 m을 출력하며 m이 없을경우 디폴트는 null
ㄴ
### 33번 extract
* EXTRACT(YEAR|MONTH|DAY FROM X) : 날짜 데이터에서 연,월,일 데이터 출력

### 39번 NATURAL JOIN
: ON절 x, using x, select절에서 별칭이나 테이블명 붙일 수 없다

### 49번 LTRIM
```SELECT LTRIM('SQLDDEVELOPER', 'LQS')```
-> 맨 왼쪽부터 L,Q,S중 하나면 지워버림, 안나올 때 까지 반복
* DEVELOPER 출력됨

# 모의고사 5회

### 집합 연산자에서 order by
ORDER BY는 전체 결과에 한 번만 적용 가능

각 서브쿼리 안에서는 ORDER BY를 쓸 수 없습니다.

집합 연산 후 최종 결과를 정렬하는 용도로만 사용 가능

### case - when에서 조건
좋은 질문입니다!
`CASE WHEN`에서 **칼럼이 들어간 형식**과 **안 들어간 형식**은 **완전히 다릅니다.**
각각의 문법 구조와 동작 방식이 다르기 때문에, 꼭 구분해서 써야 해요.

---

## ✅ 1. **칼럼 없는 CASE WHEN** (일반 형식)

```sql
CASE 
  WHEN 조건1 THEN 결과1
  WHEN 조건2 THEN 결과2
  ELSE 기본값
END
```

* **`WHEN` 뒤에 조건식을 직접 작성**
* **복잡한 조건**을 표현할 수 있음
* `IF...ELSE IF...ELSE`와 비슷한 구조

### 예시

```sql
SELECT
  emp_name,
  salary,
  CASE 
    WHEN salary >= 5000 THEN '고액 연봉'
    WHEN salary >= 3000 THEN '중간 연봉'
    ELSE '저연봉'
  END AS salary_grade
FROM emp;
```

---

## ✅ 2. **칼럼이 들어간 CASE WHEN** (단순 값 비교 형식)

```sql
CASE 칼럼
  WHEN 값1 THEN 결과1
  WHEN 값2 THEN 결과2
  ELSE 기본값
END
```

* =(equi) 조건만 사용 가능


## 🔍 두 형식의 차이 요약

| 구분    | 칼럼 없는 형식                     | 칼럼 있는 형식                      |
| ----- | ---------------------------- | ----------------------------- |
| 문법    | `CASE WHEN 조건 THEN ...`      | `CASE column WHEN 값 THEN ...` |
| 비교 방식 | 자유로운 조건식 사용 (`>=`, `LIKE` 등) | `column = 값` 비교만 가능           |
| 유연성   | 높음                           | 낮음                            |
| 사용 예시 | 범위 분기, 논리식 판단                | 특정 값 매핑 (코드, 직급 등)            |

* DECODE 의 경우에도 equal 조건만 가능


### 5번 관계 엔터티
* 관계속성 : 엔터티간 관계에서 생기며, 유사한 성격의 관계속성이 여러개일 때 별도의 관계 엔터티로 설계 가능
* 원래 엔터티는 주식별자와 일반 속성이 있어야하지만 관계 엔터티는 주 식별자만 있어도 ㅇㅋ

### 25번 ALTER - DEFAULT 조건
* default 설정시 해당 컬럼이 입력되지 않은경우에 설정된 값이 입력됨
* alter 명령어 이후에 들어오는 데이터부터 적용

### 28번 숫자함수
* 음수의 round는 일단 절댓값에 round붙이고 이후 - 붙이기



# 추가적인..

### 데이터 모델링시 고려할 사항이 아닌 것 = 성능을 위한 반정규화를 고려한다

"데이터 모델링 시 유의점" 이라는 내용 때문일거라 생각됩니다.

반정규화는 데이터 모델링할 때가 아닌 사용하면서 성능적인 이슈 때문에 이를 해결하기 위한 방법 중 하나기 때문이지 아닐까 생각돼요

### MERGE - DELETE
DELETE 절은 MERGE UPDATE 절로 갱신된 행을 대상으로 수행되며, 갱신된 값을 기준으로 행을 삭제한다.

### 계층 쿼리에서 cycle

좋은 질문입니다!
Oracle의 \*\*계층형 쿼리(Hierarchical Query)\*\*에서 나오는 `CYCLE`은 **무한 루프(순환 참조)를 방지**하기 위한 기능입니다.

---

## ✅ 계층쿼리란?

Oracle에서 `START WITH ... CONNECT BY` 구문을 이용해 **부모-자식 관계의 트리 구조**를 탐색할 수 있는 SQL

```sql
SELECT ...
FROM 테이블명
START WITH 조건
CONNECT BY PRIOR 자식컬럼 = 부모컬럼;
```

---

## 🔥 그런데 문제가 되는 경우: **CYCLE(순환)**

### ❌ 순환 참조가 발생하면?

예를 들어…

* A → B → C → A 처럼
* 다시 **자기 자신을 참조하거나 부모로 올라가는 루프**가 생기면

➡ **계층 쿼리는 무한 루프에 빠짐**
➡ Oracle은 `ORA-01436: 연결 순환(Cycle in connect by)` 에러 발생

---

## ✅ 해결책: `CONNECT BY NOCYCLE`

```sql
SELECT ...
FROM 테이블명
START WITH 조건
CONNECT BY NOCYCLE PRIOR 자식컬럼 = 부모컬럼;
```

* `NOCYCLE`을 붙이면

  * **순환이 발생하는 경로는 제외하고**
  * **남은 계층 경로만 탐색**함

### 🔍 예시

```sql
SELECT employee_id, manager_id
FROM employees
START WITH manager_id IS NULL
CONNECT BY NOCYCLE PRIOR employee_id = manager_id;
```

---

## ✅ 순환 여부를 표시: `CONNECT_BY_ISCYCLE`

* `CONNECT_BY_ISCYCLE` 컬럼을 `SELECT`에 넣으면,
* 순환 경로인지 여부를 `1` 또는 `0`으로 알려줌

```sql
SELECT employee_id, manager_id, CONNECT_BY_ISCYCLE
FROM employees
START WITH manager_id IS NULL
CONNECT BY NOCYCLE PRIOR employee_id = manager_id;
```

---

## ✅ 요약 정리

| 항목        | 설명                                 |
| --------- | ---------------------------------- |
| **CYCLE** | 계층 탐색 중 자기 자신을 다시 참조하는 순환 구조       |
| **문제점**   | 무한 루프 발생 → 오류                      |
| **해결**    | `CONNECT BY NOCYCLE` 사용            |
| **추적**    | `CONNECT_BY_ISCYCLE` 사용하면 순환 경로 표시 |

---
2

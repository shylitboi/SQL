# 📌 1. 12세 이하 여자 환자 목록 출력하기

## 문제 설명

`PATIENT` 테이블: 종합병원에 등록된 환자 정보

### 컬럼 정보

| 컬럼명      | 타입          | 설명              |
| -------- | ----------- | --------------- |
| PT\_NO   | VARCHAR(10) | 환자 번호           |
| PT\_NAME | VARCHAR(20) | 환자 이름           |
| GEND\_CD | VARCHAR(1)  | 성별 코드           |
| AGE      | INTEGER     | 나이              |
| TLNO     | VARCHAR(50) | 전화번호 (nullable) |

---

### 요구 사항

* **12세 이하**이고 **여자(`W`) 환자**만 조회
* 출력 컬럼: `PT_NAME`, `PT_NO`, `GEND_CD`, `AGE`, `TLNO`
* 전화번호가 없으면 `'NONE'`으로 출력
* 정렬 기준:

  * `AGE` 내림차순
  * `PT_NAME` 오름차순

---

## 문제 풀이

### 1. **조건부터 생각하기**

* 나이: `AGE <= 12`
* 성별: `GEND_CD = 'W'`

```sql
WHERE AGE <= 12 AND GEND_CD = 'W'
```

---

### 2. **전화번호가 없으면 'NONE' 처리하기**

#### 방법 1: `CASE WHEN`

```sql
CASE 
  WHEN TLNO IS NULL THEN 'NONE'
  ELSE TLNO
END AS TLNO
```

* 조건문으로 NULL 여부를 직접 체크
* 가장 명확한 방식이며 표준 SQL에서 사용 가능

#### 방법 2: `IFNULL()` 함수

```sql
IFNULL(TLNO, 'NONE') AS TLNO
```

* `TLNO`가 `NULL`이면 `'NONE'` 반환
* `CASE WHEN`을 짧게 축약한 MySQL 전용 함수
* 더 **간단하고 가독성 좋음**

---

### 3. **정렬 기준**

```sql
ORDER BY AGE DESC, PT_NAME ASC
```

* 나이가 많을수록 먼저
* 나이가 같을 경우 이름 오름차순

---

## 최종 SQL 쿼리

### ✅ `CASE WHEN` 사용 버전

```sql
SELECT 
  PT_NAME, 
  PT_NO, 
  GEND_CD, 
  AGE,
  CASE 
    WHEN TLNO IS NULL THEN 'NONE'
    ELSE TLNO
  END AS TLNO
FROM PATIENT
WHERE AGE <= 12 AND GEND_CD = 'W'
ORDER BY AGE DESC, PT_NAME ASC;
```

---

### ✅ `IFNULL()` 사용 버전 (더 간단한 MySQL 방식)

```sql
SELECT 
  PT_NAME, 
  PT_NO, 
  GEND_CD, 
  AGE,
  IFNULL(TLNO, 'NONE') AS TLNO
FROM PATIENT
WHERE AGE <= 12 AND GEND_CD = 'W'
ORDER BY AGE DESC, PT_NAME ASC;
```

---

## 🧠 `CASE WHEN` vs `IFNULL` 차이 설명

| 항목    | `CASE WHEN`                                        | `IFNULL()`              |
| ----- | -------------------------------------------------- | ----------------------- |
| 문법    | SQL 표준                                             | MySQL 전용 (Oracle에선 NVL) |
| 유연성   | 다양한 조건 (예: 범위, 복합 조건 등) 처리 가능                      | NULL 처리만 가능             |
| 사용 위치 | SELECT, WHERE, ORDER BY 등 어디서든 가능                  | SELECT 절 주로 사용          |
| 예시    | `CASE WHEN TLNO IS NULL THEN 'NONE' ELSE TLNO END` | `IFNULL(TLNO, 'NONE')`  |

---

## 🔍 `IS NULL` 설명

```sql
-- 잘못된 방식 (X)
WHERE TLNO = NULL

-- 올바른 방식 (O)
WHERE TLNO IS NULL
```

* `NULL`은 비교 연산자(`=`, `!=`)로 비교하지 못함
* 항상 `IS NULL` 또는 `IS NOT NULL` 사용해야 정확하게 판단됨

---
# 📌 2. 강원도에 위치한 식품공장 목록 출력하기

## 문제 설명

`FOOD_FACTORY` 테이블: 식품 공장의 정보가 담긴 테이블

### 컬럼 정보

| 컬럼명           | 타입           | 설명                 |
| ------------- | ------------ | ------------------ |
| FACTORY\_ID   | VARCHAR(10)  | 공장 ID (기본키)        |
| FACTORY\_NAME | VARCHAR(50)  | 공장 이름              |
| ADDRESS       | VARCHAR(100) | 공장 주소              |
| TLNO          | VARCHAR(20)  | 공장 전화번호 (nullable) |

---

### 요구 사항

* **강원도에 위치한 공장만 조회**
* 출력 컬럼: `FACTORY_ID`, `FACTORY_NAME`, `ADDRESS`
* **공장 ID 기준 오름차순 정렬**

---

## 문제 풀이

### 1. **강원도 필터링하기**

* 주소에서 지역 정보는 `ADDRESS` 컬럼에 포함되어 있음
* 주소가 `'강원도'`로 **시작**하는지 확인 → `LIKE '강원도%'`

```sql
WHERE ADDRESS LIKE '강원도%'
```

---

### 2. **정렬 기준**

```sql
ORDER BY FACTORY_ID ASC
```

* 공장 ID를 기준으로 **오름차순** 정렬

---

## 최종 SQL 쿼리

```sql
SELECT 
  FACTORY_ID, 
  FACTORY_NAME, 
  ADDRESS
FROM FOOD_FACTORY AS F
WHERE ADDRESS LIKE '강원도%'
ORDER BY FACTORY_ID ASC;
```

---

## 🔍 `LIKE` 연산자 설명

### 기본 문법

```sql
WHERE 컬럼 LIKE '패턴'
```

* `%`: **임의 길이의 문자열**
* `'강원도%'`: `'강원도'`로 시작하는 모든 주소에 매칭

---

# 📘 문자열 함수 요약 

## ✅ 1. `INSTR(str, substr)`

### ✔️ 설명

* `str` 문자열에서 `substr`이 \*\*처음으로 등장하는 위치(숫자)\*\*를 반환
* **위치는 1부터 시작**
* 찾는 문자열이 없으면 `0` 반환

### 📌 문법

```sql
INSTR('abcdefg', 'c')     -- 결과: 3
INSTR('apple pie', 'p')   -- 결과: 2
INSTR('apple pie', 'x')   -- 결과: 0
```

---

## ✅ 2. `LEFT(str, len)`

### ✔️ 설명

* 문자열 `str`에서 **왼쪽부터 `len`개의 문자**를 반환
* 즉, **앞에서부터 몇 글자 자를지** 지정

### 📌 문법

```sql
LEFT('abcdef', 3)   -- 결과: 'abc'
LEFT('서울시 강남구', 2)  -- 결과: '서울'
```

> 주로 `"서울"`처럼 앞 글자만 잘라내고 필터링할 때 유용

---

## ✅ 3. `SUBSTRING_INDEX(str, delim, count)`

### ✔️ 설명

* 문자열 `str`을 구분자 `delim` 기준으로 나눈 뒤,
  **앞에서부터 `count`번째까지 반환**
* `count`가 **음수이면 뒤에서부터** 처리됨

### 📌 문법

```sql
SUBSTRING_INDEX('서울시 강남구 역삼동', ' ', 1)   -- 결과: '서울시'
SUBSTRING_INDEX('서울시 강남구 역삼동', ' ', 2)   -- 결과: '서울시 강남구'
SUBSTRING_INDEX('a.b.c.d', '.', 2)              -- 결과: 'a.b'
SUBSTRING_INDEX('a.b.c.d', '.', -1)             -- 결과: 'd'
```
